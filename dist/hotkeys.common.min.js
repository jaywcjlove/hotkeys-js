/*! hotkeys-js v3.8.7 | MIT (c) 2021 kenny wong <wowohoo@qq.com> | http://jaywcjlove.github.io/hotkeys */
"use strict";const isff="undefined"!=typeof navigator&&0<navigator.userAgent.toLowerCase().indexOf("firefox");function addEvent(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent(`on${t}`,()=>{n(window.event)})}function getMods(t,e){const n=e.slice(0,e.length-1);for(let e=0;e<n.length;e++)n[e]=t[n[e].toLowerCase()];return n}function getKeys(e){const t=(e=(e="string"!=typeof e?"":e).replace(/\s/g,"")).split(",");let n=t.lastIndexOf("");for(;0<=n;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}function compareArray(e,t){var n=e.length<t.length?t:e;const o=e.length<t.length?e:t;let s=!0;for(let e=0;e<n.length;e++)~o.indexOf(n[e])||(s=!1);return s}const _keyMap={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21ea":20,",":188,".":190,"/":191,"`":192,"-":isff?173:189,"=":isff?61:187,";":isff?59:186,"'":222,"[":219,"]":221,"\\":220,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,f13:124,f14:125,f15:126,f16:127,f17:128,f18:129,f19:130},_modifier={"\u21e7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},modifierMap={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},_mods={16:!1,18:!1,17:!1,91:!1},_handlers={};let _downKeys=[],_scope="all";const elementHasBindEvent=[],code=e=>_keyMap[e.toLowerCase()]||_modifier[e.toLowerCase()]||e.toUpperCase().charCodeAt(0);function setScope(e){_scope=e||"all"}function getScope(){return _scope||"all"}function getPressedKeyCodes(){return _downKeys.slice(0)}function filter(e){var t=e.target||e.srcElement,{tagName:e}=t;let n=!t.isContentEditable&&("INPUT"!==e&&"TEXTAREA"!==e&&"SELECT"!==e||t.readOnly)?!0:!1;return n}function isPressed(e){return"string"==typeof e&&(e=code(e)),!!~_downKeys.indexOf(e)}function deleteScope(e,t){let n,o;e=e||getScope();for(const s in _handlers)if(Object.prototype.hasOwnProperty.call(_handlers,s))for(n=_handlers[s],o=0;o<n.length;)n[o].scope===e?n.splice(o,1):o++;getScope()===e&&setScope(t||"all")}function clearModifier(e){let t=e.keyCode||e.which||e.charCode;var n=_downKeys.indexOf(t);if(n<0||_downKeys.splice(n,1),e.key&&"meta"==e.key.toLowerCase()&&_downKeys.splice(0,_downKeys.length),93!==t&&224!==t||(t=91),t in _mods){_mods[t]=!1;for(const o in _modifier)_modifier[o]===t&&(hotkeys[o]=!1)}}function unbind(n,...o){if(n){if(Array.isArray(n))n.forEach(e=>{e.key&&eachUnbind(e)});else if("object"==typeof n)n.key&&eachUnbind(n);else if("string"==typeof n){let[e,t]=o;"function"==typeof e&&(t=e,e=""),eachUnbind({key:n,scope:e,method:t,splitKey:"+"})}}else Object.keys(_handlers).forEach(e=>delete _handlers[e])}const eachUnbind=({key:e,scope:s,method:d,splitKey:i="+"})=>{const t=getKeys(e);t.forEach(e=>{var t=e.split(i),n=t.length,e=t[n-1],e="*"===e?"*":code(e);if(_handlers[e]){s=s||getScope();const o=1<n?getMods(_modifier,t):[];_handlers[e]=_handlers[e].map(e=>{return d&&e.method!==d||e.scope!==s||!compareArray(e.mods,o)?e:{}})}})};function eventHandler(e,t,n){let o;if(t.scope===n||"all"===t.scope){o=0<t.mods.length;for(const s in _mods)Object.prototype.hasOwnProperty.call(_mods,s)&&(!_mods[s]&&~t.mods.indexOf(+s)||_mods[s]&&!~t.mods.indexOf(+s))&&(o=!1);(0!==t.mods.length||_mods[16]||_mods[18]||_mods[17]||_mods[91])&&!o&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function dispatch(n){var t=_handlers["*"];let o=n.keyCode||n.which||n.charCode;if(hotkeys.filter.call(this,n)){if(93!==o&&224!==o||(o=91),~_downKeys.indexOf(o)||229===o||_downKeys.push(o),["ctrlKey","altKey","shiftKey","metaKey"].forEach(e=>{var t=modifierMap[e];n[e]&&!~_downKeys.indexOf(t)?_downKeys.push(t):!n[e]&&~_downKeys.indexOf(t)?_downKeys.splice(_downKeys.indexOf(t),1):"metaKey"===e&&n[e]&&3===_downKeys.length&&(n.ctrlKey||n.shiftKey||n.altKey||(_downKeys=_downKeys.slice(_downKeys.indexOf(t))))}),o in _mods){_mods[o]=!0;for(const e in _modifier)_modifier[e]===o&&(hotkeys[e]=!0);if(!t)return}for(const r in _mods)Object.prototype.hasOwnProperty.call(_mods,r)&&(_mods[r]=n[modifierMap[r]]);n.getModifierState&&(!n.altKey||n.ctrlKey)&&n.getModifierState("AltGraph")&&(~_downKeys.indexOf(17)||_downKeys.push(17),~_downKeys.indexOf(18)||_downKeys.push(18),_mods[17]=!0,_mods[18]=!0);var s=getScope();if(t)for(let e=0;e<t.length;e++)t[e].scope===s&&("keydown"===n.type&&t[e].keydown||"keyup"===n.type&&t[e].keyup)&&eventHandler(n,t[e],s);if(o in _handlers)for(let e=0;e<_handlers[o].length;e++)if(("keydown"===n.type&&_handlers[o][e].keydown||"keyup"===n.type&&_handlers[o][e].keyup)&&_handlers[o][e].key){const l=_handlers[o][e];var{splitKey:d}=l,i=l.key.split(d);const a=[];for(let e=0;e<i.length;e++)a.push(code(i[e]));a.sort().join("")===_downKeys.sort().join("")&&eventHandler(n,l,s)}}}function isElementBind(e){return!!~elementHasBindEvent.indexOf(e)}var hotkeys=(e,t,n)=>{_downKeys=[];const o=getKeys(e);let s=[],d="all",i=document,r=0,l=!1,a=!0,c="+";for(void 0===n&&"function"==typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(d=t.scope),t.element&&(i=t.element),t.keyup&&(l=t.keyup),void 0!==t.keydown&&(a=t.keydown),"string"==typeof t.splitKey&&(c=t.splitKey)),"string"==typeof t&&(d=t);r<o.length;r++)e=o[r].split(c),s=[],1<e.length&&(s=getMods(_modifier,e)),(e="*"===(e=e[e.length-1])?"*":code(e))in _handlers||(_handlers[e]=[]),_handlers[e].push({keyup:l,keydown:a,scope:d,mods:s,shortcut:o[r],method:n,key:o[r],splitKey:c});void 0!==i&&!isElementBind(i)&&window&&(elementHasBindEvent.push(i),addEvent(i,"keydown",e=>{dispatch(e)}),addEvent(window,"focus",()=>{_downKeys=[]}),addEvent(i,"keyup",e=>{dispatch(e),clearModifier(e)}))};const _api={setScope:setScope,getScope:getScope,deleteScope:deleteScope,getPressedKeyCodes:getPressedKeyCodes,isPressed:isPressed,filter:filter,unbind:unbind};for(const Fa in _api)Object.prototype.hasOwnProperty.call(_api,Fa)&&(hotkeys[Fa]=_api[Fa]);if("undefined"!=typeof window){const Ga=window.hotkeys;hotkeys.noConflict=e=>(e&&window.hotkeys===hotkeys&&(window.hotkeys=Ga),hotkeys),window.hotkeys=hotkeys}module.exports=hotkeys;