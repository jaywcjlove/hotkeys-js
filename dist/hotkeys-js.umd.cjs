(function(O,E){typeof exports=="object"&&typeof module!="undefined"?module.exports=E():typeof define=="function"&&define.amd?define(E):(O=typeof globalThis!="undefined"?globalThis:O||self,O.hotkeys=E())})(this,function(){"use strict";/*!
 * hotkeys-js v3.13.15
 * A simple micro-library for defining and dispatching keyboard shortcuts. It has no dependencies.
 * 
 * @author kenny wong <wowohoo@qq.com>
 * @license MIT
 * @homepage https://jaywcjlove.github.io/hotkeys-js
 */const O=typeof navigator!="undefined"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function E(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent&&e.attachEvent(`on${t}`,n)}function L(e,t,n,o){e&&(e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent&&e.detachEvent(`on${t}`,n))}function U(e,t){const n=t.slice(0,t.length-1),o=[];for(let i=0;i<n.length;i++)o.push(e[n[i].toLowerCase()]);return o}function F(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");const t=e.split(",");let n=t.lastIndexOf("");for(;n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}function R(e,t){const n=e.length>=t.length?e:t,o=e.length>=t.length?t:e;let i=!0;for(let f=0;f<n.length;f++)o.indexOf(n[f])===-1&&(i=!1);return i}const x={backspace:8,"⌫":8,tab:9,clear:12,enter:13,"↩":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,arrowup:38,arrowdown:40,arrowleft:37,arrowright:39,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":O?173:189,"=":O?61:187,";":O?59:186,"'":222,"{":219,"}":221,"[":219,"]":221,"\\":220},h={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,meta:91,command:91},C={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},a={16:!1,18:!1,17:!1,91:!1},l={};for(let e=1;e<20;e++)x[`f${e}`]=111+e;let c=[],M=null,B="all";const K=new Map,_=e=>x[e.toLowerCase()]||h[e.toLowerCase()]||e.toUpperCase().charCodeAt(0),V=e=>Object.keys(x).find(t=>x[t]===e),X=e=>Object.keys(h).find(t=>h[t]===e),D=e=>{B=e||"all"},A=()=>B||"all",z=()=>c.slice(0),J=()=>c.map(e=>V(e)||X(e)||String.fromCharCode(e)),Q=()=>{const e=[];return Object.keys(l).forEach(t=>{l[t].forEach(({key:n,scope:o,mods:i,shortcut:f})=>{e.push({scope:o,shortcut:f,mods:i,keys:n.split("+").map(y=>_(y))})})}),e},$=e=>{const t=e.target||e.srcElement,{tagName:n}=t;let o=!0;const i=n==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(t.type);return(t.isContentEditable||(i||n==="TEXTAREA"||n==="SELECT")&&!t.readOnly)&&(o=!1),o},W=e=>(typeof e=="string"&&(e=_(e)),c.indexOf(e)!==-1),Y=(e,t)=>{let n,o;e||(e=A());for(const i in l)if(Object.prototype.hasOwnProperty.call(l,i))for(n=l[i],o=0;o<n.length;)n[o].scope===e?n.splice(o,1).forEach(({element:y})=>S(y)):o++;A()===e&&D(t||"all")};function Z(e){let t=e.keyCode||e.which||e.charCode;e.key&&e.key.toLowerCase()==="capslock"&&(t=_(e.key));const n=c.indexOf(t);if(n>=0&&c.splice(n,1),e.key&&e.key.toLowerCase()==="meta"&&c.splice(0,c.length),(t===93||t===224)&&(t=91),t in a){a[t]=!1;for(const o in h)h[o]===t&&(g[o]=!1)}}const G=(e,...t)=>{if(typeof e=="undefined")Object.keys(l).forEach(n=>{Array.isArray(l[n])&&l[n].forEach(o=>j(o)),delete l[n]}),S(null);else if(Array.isArray(e))e.forEach(n=>{n.key&&j(n)});else if(typeof e=="object")e.key&&j(e);else if(typeof e=="string"){let[n,o]=t;typeof n=="function"&&(o=n,n=""),j({key:e,scope:n,method:o,splitKey:"+"})}},j=({key:e,scope:t,method:n,splitKey:o="+"})=>{F(e).forEach(f=>{const y=f.split(o),u=y.length,s=y[u-1],d=s==="*"?"*":_(s);if(!l[d])return;t||(t=A());const m=u>1?U(h,y):[],k=[];l[d]=l[d].filter(p=>{const r=(n?p.method===n:!0)&&p.scope===t&&R(p.mods,m);return r&&k.push(p.element),!r}),k.forEach(p=>S(p))})};function H(e,t,n,o){if(t.element!==o)return;let i;if(t.scope===n||t.scope==="all"){i=t.mods.length>0;for(const f in a)Object.prototype.hasOwnProperty.call(a,f)&&(!a[f]&&t.mods.indexOf(+f)>-1||a[f]&&t.mods.indexOf(+f)===-1)&&(i=!1);(t.mods.length===0&&!a[16]&&!a[18]&&!a[17]&&!a[91]||i||t.shortcut==="*")&&(t.keys=[],t.keys=t.keys.concat(c),t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0)))}}function I(e,t){const n=l["*"];let o=e.keyCode||e.which||e.charCode;if(e.code){const s={KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90};s[e.code]&&(o=s[e.code])}if(e.key&&e.key.toLowerCase()==="capslock"||!(g.filter||$).call(this,e))return;if((o===93||o===224)&&(o=91),c.indexOf(o)===-1&&o!==229&&c.push(o),["metaKey","ctrlKey","altKey","shiftKey"].forEach(s=>{const d=C[s];e[s]&&c.indexOf(d)===-1?c.push(d):!e[s]&&c.indexOf(d)>-1?c.splice(c.indexOf(d),1):s==="metaKey"&&e[s]&&(c=c.filter(m=>m in C||m===o))}),o in a){a[o]=!0;for(const s in h)if(Object.prototype.hasOwnProperty.call(h,s)){const d=C[h[s]];g[s]=e[d]}if(!n)return}for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(a[s]=e[C[s]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(c.indexOf(17)===-1&&c.push(17),c.indexOf(18)===-1&&c.push(18),a[17]=!0,a[18]=!0);const f=A();if(n)for(let s=0;s<n.length;s++)n[s].scope===f&&(e.type==="keydown"&&n[s].keydown||e.type==="keyup"&&n[s].keyup)&&H(e,n[s],f,t);if(!(o in l))return;const y=l[o],u=y.length;for(let s=0;s<u;s++)if((e.type==="keydown"&&y[s].keydown||e.type==="keyup"&&y[s].keyup)&&y[s].key){const d=y[s],{splitKey:m}=d,k=d.key.split(m),p=[];for(let b=0;b<k.length;b++)p.push(_(k[b]));p.sort().join("")===c.sort().join("")&&H(e,d,f,t)}}const g=function(t,n,o){c=[];const i=F(t);let f=[],y="all",u=document,s=0,d=!1,m=!0,k="+",p=!1,b=!1;if(o===void 0&&typeof n=="function"&&(o=n),Object.prototype.toString.call(n)==="[object Object]"){const r=n;r.scope&&(y=r.scope),r.element&&(u=r.element),r.keyup&&(d=r.keyup),r.keydown!==void 0&&(m=r.keydown),r.capture!==void 0&&(p=r.capture),typeof r.splitKey=="string"&&(k=r.splitKey),r.single===!0&&(b=!0)}for(typeof n=="string"&&(y=n),b&&G(t,y);s<i.length;s++){const r=i[s].split(k);f=[],r.length>1&&(f=U(h,r));let w=r[r.length-1];w=w==="*"?"*":_(w),w in l||(l[w]=[]),l[w].push({keyup:d,keydown:m,scope:y,mods:f,shortcut:i[s],method:o,key:i[s],splitKey:k,element:u})}if(typeof u!="undefined"&&typeof window!="undefined"){if(!K.has(u)){const r=(P=window.event)=>I(P,u),w=(P=window.event)=>{I(P,u),Z(P)};K.set(u,{keydownListener:r,keyupListenr:w,capture:p}),E(u,"keydown",r,p),E(u,"keyup",w,p)}if(!M){const r=()=>{c=[]};M={listener:r,capture:p},E(window,"focus",r,p)}}};function q(e,t="all"){Object.keys(l).forEach(n=>{l[n].filter(i=>i.scope===t&&i.shortcut===e).forEach(i=>{i&&i.method&&i.method({},i)})})}function S(e){const t=Object.values(l).flat();if(t.findIndex(({element:o})=>o===e)<0&&e){const{keydownListener:o,keyupListenr:i,capture:f}=K.get(e)||{};o&&i&&(L(e,"keyup",i,f),L(e,"keydown",o,f),K.delete(e))}if((t.length<=0||K.size<=0)&&(Array.from(K.keys()).forEach(i=>{const{keydownListener:f,keyupListenr:y,capture:u}=K.get(i)||{};f&&y&&(L(i,"keyup",y,u),L(i,"keydown",f,u),K.delete(i))}),K.clear(),Object.keys(l).forEach(i=>delete l[i]),M)){const{listener:i,capture:f}=M;L(window,"focus",i,f),M=null}}const T={getPressedKeyString:J,setScope:D,getScope:A,deleteScope:Y,getPressedKeyCodes:z,getAllKeyCodes:Q,isPressed:W,filter:$,trigger:q,unbind:G,keyMap:x,modifier:h,modifierMap:C};for(const e in T){const t=e;Object.prototype.hasOwnProperty.call(T,t)&&(g[t]=T[t])}if(typeof window!="undefined"){const e=window.hotkeys;g.noConflict=t=>(t&&window.hotkeys===g&&(window.hotkeys=e),g),window.hotkeys=g}return g});
//# sourceMappingURL=hotkeys-js.umd.cjs.map
